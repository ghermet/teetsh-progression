erDiagram
    PROGRAMMATIONS {
        uuid id PK "Primary Key"
        string name "Programmation name"
        text short_description "Brief description"
        string niveau "Educational level (CM1, CM2, etc.)"
        uuid school_year_id FK "Reference to school year"
        uuid school_id FK "Reference to school"
        uuid user_id FK "Reference to user"
        string status "draft, published, archived"
        integer nb_of_use_landing "Number of uses from landing page"
        integer nb_of_use_in_app "Number of uses from within the app"
        integer column_width "Column width for display"
        string font_size "Font size for display"
        string view "View mode for display"
        boolean inverted_row_col "Invert rows and columns for display"
        timestamptz created_at "Creation timestamp"
        timestamptz updated_at "Last update timestamp"
        timestamptz published_at "Publication timestamp"
        string slug "URL-friendly slug"
        string document_id "Reference to an external document"
    }

    PERIODS {
        uuid id PK "Primary Key"
        uuid programmation_id FK "Reference to programmation"
        string name "Period name (Semaine 1, Octobre)"
        date start_date "Period start date"
        date end_date "Period end date"
        string color "CSS color identifier"
        integer position "Display order"
    }

    SUBJECTS {
        uuid id PK "Primary Key"
        uuid programmation_id FK "Reference to programmation"
        string name "Subject name (Histoire et géographie)"
        string color "CSS color identifier"
        integer position "Display order"
    }

    DOMAINS {
        uuid id PK "Primary Key"
        uuid matiere_id FK "Reference to subject"
        string name "Domain name (Histoire, Géographie)"
        string color "CSS color identifier"
    }

    LEARNING_ITEMS {
        uuid id PK "Primary Key"
        uuid domaine_id FK "Reference to domain"
        uuid periode_id FK "Reference to period"
        text value "HTML educational content"
        integer y "y-coordinate for display"
        text sequence "Associated sequence information (currently unused)"
        text fiche_de_prep "Associated preparation sheet (currently unused)"
        jsonb attachments "File attachments related to this item"
    }

    SCHOOL_YEARS {
        uuid id PK "Primary Key"
        string name "Year name"
        date start_date "Academic year start"
        date end_date "Academic year end"
    }

    SCHOOLS {
        uuid id PK "Primary Key"
        string name "School name"
        string address "School address"
        string city "City"
        string postal_code "Postal code"
    }

    USERS {
        uuid id PK "Primary Key"
        string email "User email"
        string first_name "First name"
        string last_name "Last name"
        string role "teacher, admin, etc."
    }

    %% Relationships
    PROGRAMMATIONS ||--o{ PERIODS : "has many"
    PROGRAMMATIONS ||--o{ SUBJECTS : "contains"
    PROGRAMMATIONS }o--|| SCHOOL_YEARS : "belongs to"
    PROGRAMMATIONS }o--|| SCHOOLS : "belongs to"
    PROGRAMMATIONS }o--|| USERS : "created by"
    
    SUBJECTS ||--o{ DOMAINS : "divided into"
    DOMAINS ||--o{ LEARNING_ITEMS : "contains"
    PERIODS ||--o{ LEARNING_ITEMS : "scheduled in"
